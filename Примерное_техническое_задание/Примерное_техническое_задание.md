1. Назначение продукта

Веб-приложение — персональный дашборд для управления привычками, проблемами/решениями и текущими микрозадачами.
Интерфейс всегда в тёмной теме. Пользователь работает с набором виджетов, которые можно свободно раскладывать по дашборду.

1. Общая идея

Веб-дашборд в тёмной теме.
На дашборде лежат виджеты, которые можно перетаскивать drag-and-drop.

Стандартные элементы:

Лента привычек.

Таблица «Проблемы / Решения».

Список микрозадач «на сейчас».

Виджет-картинка (любая загруженная картинка, ведёт себя как виджет).

Состояние дашборда (расположение виджетов и данные внутри них) должно сохраняться между заходами пользователя.

2. Виджет «Лента привычек»

Внешний вид по картинке:

Вертикальный список привычек, каждая — цветная «плашка»:

зелёная — внедрено;

жёлтая — внедряется;

красная — не внедрено.

В правом краю каждой плашки — крестик для удаления.

Сверху над первой привычкой — серый «хендл» со стрелкой вверх.

Под последней привычкой — серый «хендл» со стрелкой вниз и рядом кнопка «+».

Функциональность:

Управление высотой видимой области

Серые «хендлы» со стрелками (сверху и снизу) служат для изменения высоты виджета.

Пользователь зажимает хендл мышью и тянет вверх/вниз — виджет становится выше/ниже, в поле зрения оказывается больше/меньше привычек.

Прокрутка

Лента прокручивается колёсиком мыши внутри виджета (вертикальный скролл).

Статусы и порядок

Привычки логически разделены по трём статусам (цветам), условно сверху вниз: зелёные → жёлтые → красные.

Привычку можно перетаскивать drag-and-drop:

менять порядок внутри своего цвета;

переносить в другой цвет; при переносе статус привычки меняется на цвет целевой зоны.

Добавление / удаление / редактирование

Кнопка «+» под лентой создаёт новую привычку красного цвета (статус «не внедрено»).

У каждой привычки:

крестик для удаления;

возможность отредактировать текст прямо в плашке.

4. Виджет «Список микрозадач на сейчас»

1. Назначение виджета

Виджет «Микрозадачи» — вертикальный список коротких задач «на сейчас» (todo-лист) с учётом затраченного времени.

Цели:

фиксировать актуальные микрозадачи;

отслеживать, сколько времени ушло на каждую;

видеть суммарное время, потраченное на все задачи в виджете.

2. Общий вид

Виджет представляет собой вертикальный список задач.

Над списком отображается строка с общим временем, потраченным на все задачи в списке (далее — «суммарный таймер»).

Каждая строка списка — это одна задача с управлением и таймером.

3. Элементы одной задачи

Для каждой задачи отображаются:

Текст задачи

Вводится и редактируется пользователем.

В активном состоянии — обычный текст.

В выполненном состоянии — зачёркнутый текст.

Кнопка «Старт / Пауза»

Начальное состояние: кнопка «>» (Старт).

При нажатии «Старт»:

у задачи запускается таймер;

кнопка визуально меняется на «Пауза».

При нажатии «Пауза»:

таймер задачи останавливается;

кнопка снова меняется на «>» (Старт).

Таймер задачи

Отображается рядом с кнопкой «Старт / Пауза».

Начальное значение: 0:00:00.

Формат: часы:минуты:секунды

часы — минимум один символ (0, 1 … 10 и т.д.);

минуты и секунды — всегда две цифры (00–59).

При запущенном таймере значение увеличивается в реальном времени.

При остановке (Пауза или отметка задачи как выполненной) значение фиксируется, но не сбрасывается.

При повторном старте таймер продолжает отсчёт с накопленного значения, а не с нуля.

Чекбокс выполнения

В неотмеченном состоянии задача считается активной.

При нажатии чекбокса:

если таймер был запущен — он останавливается, значение фиксируется;

задача помечается как выполненная;

текст задачи становится зачёркнутым.

При повторном нажатии чекбокса:

задача возвращается в состояние активная;

зачёркивание текста убирается;

таймер остаётся на сохранённом значении и не запускается автоматически — его можно продолжить вручную кнопкой «Старт».

Крестик удаления

При нажатии задача удаляется из списка.

Удалённая задача:

больше не отображается;

её время не учитывается в суммарном таймере.

4. Логика работы таймеров
4.1. Ограничение: только один запущенный таймер

В каждый момент времени может быть запущен таймер только у одной задачи.

Если пользователь запускает таймер для задачи A, а до этого был запущен таймер задачи B:

Таймер задачи B останавливается, её состояние становится «Пауза».

Таймер задачи A запускается, её кнопка становится «Пауза».

4.2. Нажатие кнопки «Старт»

При нажатии «Старт» у задачи:

Все другие задачи, у которых таймер в состоянии «Запущен», переводятся в состояние «Пауза»:

у них фиксируется текущий счёт;

их кнопки меняются на «Старт».

У текущей задачи:

фиксируется факт запуска (для последующего восстановления);

запускается отсчёт таймера с текущего накопленного значения;

кнопка меняется на «Пауза».

4.3. Нажатие кнопки «Пауза»

При нажатии «Пауза» у задачи:

таймер останавливается;

накопленное время фиксируется;

кнопка меняется на «Старт»;

другие задачи не затрагиваются.

4.4. Нажатие чекбокса «Выполнено»

Если у задачи был запущен таймер:

он останавливается;

накопленное время фиксируется.

Задача помечается как выполненная, текст зачёркивается.

Повторное снятие галочки:

задача становится активной;

таймер остаётся с последним значением (0:00:00 или больше);

пользователь сам решает, запускать его снова или нет.

5. Суммарный таймер (общее время по виджету)

Суммарный таймер находится над списком задач и отражает «Всего времени на все задачи».

В суммарный таймер входит:

накопленное время всех существующих задач в списке:

активных,

выполненных,

включая задачи, у которых таймер сейчас запущен.

При вычислении суммарного времени:

для задач в состоянии «Пауза» и «Выполнено» берётся их накопленное значение таймера;

для задачи в состоянии «Запущен» берётся:
накопленное_время + (текущее_время - время_последнего_запуска).

Суммарный таймер обновляется:

в реальном времени при работе активного таймера;

при старте/паузе/выполнении задачи;

при добавлении/удалении задач.

6. Порядок задач (drag-and-drop)

Задачи в виджете расположены вертикально.

Пользователь может перетаскивать задачи drag-and-drop для изменения порядка.

Изменение порядка:

не влияет на состояние таймера и выполнение;

только меняет визуальный и логический порядок отображения.

При перетаскивании задачи с запущенным таймером отсчёт продолжается без сброса.

7. Поведение при загрузке страницы (восстановление по БД)
7.1. Хранимые данные (логика, без конкретной схемы)

Для каждой задачи в базе данных должны сохраняться по крайней мере:

текст задачи;

состояние выполнения (выполнена / не выполнена);

накопленное время (в секундах или другом формате);

состояние таймера:

«Запущен», «Пауза» или «Никогда не запускался»;

время последнего запуска, если таймер в состоянии «Запущен»;

порядок задачи в списке.

7.2. Восстановление при открытии страницы

При открытии страницы виджета:

Из БД загружается список задач со всеми указанными полями.

Для каждой задачи:

если состояние таймера = «Пауза» или «Никогда не запускался»:

в интерфейсе показывается сохранённое значение таймера;

кнопка — «Старт»;

если состояние таймера = «Запущен»:

вычисляется новое текущее значение:
новое_значение = накопленное_время + (текущее_время - время_последнего_запуска);

это значение показывается в интерфейсе;

таймер в интерфейсе запускается с этого значения;

кнопка отображается как «Пауза».

По бизнес-логике в базе данных в каждый момент времени должна быть не более одной задачи со статусом таймера «Запущен».

Если так и есть, запускается таймер только для этой задачи.

Остальные задачи отображаются с таймерами в состоянии «Пауза».

Суммарный таймер рассчитывается сразу после загрузки:

с учётом всех задач и их обновлённых значений (для запущенной задачи — с учётом разницы сейчас - время_последнего_запуска).

8. Сохранение состояния в процессе работы

При любых изменениях в виджете данные должны обновляться в БД или другом постоянном хранилище:

добавление/удаление задачи;

изменение текста;

изменение порядка задач;

запуск/остановка таймера (обновление накопленного времени, состояния таймера и времени последнего запуска);

изменение статуса выполнения.

Цель: при повторном открытии виджета пользователь видит точно то же состояние, которое было на момент последнего действия (с учётом «догонки» таймера по времени запуска).

4. Виджет «Проблемы / Решения»

Виджет отображается как таблица:

первый столбец — проблемы;

последующие столбцы — возможные решения для этой проблемы.

Каждая строка: одна проблема + её решения.

Функции:

добавить новую проблему (новая строка);

удалить проблему (строку);

добавлять/удалять решения в строке;

редактировать текст проблемы и решений;

опционально — перетаскивать строки (менять порядок проблем) и решения внутри строки (менять порядок вариантов).

5. Виджет-картинка

Пользователь может добавить на дашборд изображение:

через кнопку «Добавить картинку» (диалог выбора файла).

Картинка отображается как отдельный виджет:

её можно перемещать drag-and-drop по дашборду;

её можно масштабировать/изменять размер (zoom):

растягивать/сжимать за края/углы виджета.

У виджета-картинки есть крестик для удаления.